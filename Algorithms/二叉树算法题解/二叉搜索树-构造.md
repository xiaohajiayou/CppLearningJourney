


å‰ç½®çŸ¥è¯†

é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…ˆå­¦ä¹ ï¼š

*   [äºŒå‰æ ‘ç»“æ„åŸºç¡€](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/)
*   [äºŒå‰æ ‘çš„ DFS/BFS éå†](https://labuladong.online/algo/data-structure-basic/binary-tree-traverse-basic/)

ä¹‹å‰å†™äº†ä¸¤ç¯‡æ‰‹æŠŠæ‰‹åˆ· BST ç®—æ³•é¢˜çš„æ–‡ç« ï¼Œ[ç¬¬ä¸€ç¯‡](https://labuladong.online/algo/data-structure/bst-part1/) è®²äº†ä¸­åºéå†å¯¹ BST çš„é‡è¦æ„ä¹‰ï¼Œ[ç¬¬äºŒç¯‡](https://labuladong.online/algo/data-structure/bst-part2/) å†™äº† BST çš„åŸºæœ¬æ“ä½œã€‚

æœ¬æ–‡å°±æ¥å†™æ‰‹æŠŠæ‰‹åˆ· BST ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡ï¼Œå¾ªåºæ¸è¿›åœ°è®²ä¸¤é“é¢˜ï¼Œå¦‚ä½•è®¡ç®—æ‰€æœ‰æœ‰æ•ˆ BSTã€‚

ç¬¬ä¸€é“é¢˜æ˜¯åŠ›æ‰£ç¬¬ 96 é¢˜ã€Œ[ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/)ã€ï¼š

**96\. ä¸åŒçš„äºŒå‰æœç´¢æ ‘**Â | [åŠ›æ‰£](https://leetcode.cn/problems/unique-binary-search-trees/) | [LeetCode](https://leetcode.com/problems/unique-binary-search-trees/) | Â ğŸŸ 

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œæ±‚æ°ç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» `1` åˆ° `n` äº’ä¸ç›¸åŒçš„ **äºŒå‰æœç´¢æ ‘** æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://labuladong.online/algo/images/lc/uploads/2021/01/18/uniquebstn3.jpg)

**è¾“å…¥ï¼š**n = 3
**è¾“å‡ºï¼š**5

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**n = 1
**è¾“å‡ºï¼š**1

**æç¤ºï¼š**

*   `1 <= n <= 19`

**é¢˜ç›®æ¥æºï¼š[åŠ›æ‰£ 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/unique-binary-search-trees/)ã€‚**

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š


cpp ğŸ¤–

    int numTrees(int n);


è¿™å°±æ˜¯ä¸€ä¸ªæ­£å®—çš„ç©·ä¸¾é—®é¢˜ï¼Œé‚£ä¹ˆä»€ä¹ˆæ–¹å¼èƒ½å¤Ÿæ­£ç¡®åœ°ç©·ä¸¾æœ‰æ•ˆ BST çš„æ•°é‡å‘¢ï¼Ÿ

æˆ‘ä»¬å‰æ–‡è¯´è¿‡ï¼Œä¸è¦å°çœ‹ã€Œç©·ä¸¾ã€ï¼Œè¿™æ˜¯ä¸€ä»¶çœ‹èµ·æ¥ç®€å•ä½†æ˜¯æ¯”è¾ƒæœ‰æŠ€æœ¯å«é‡çš„äº‹æƒ…ï¼Œé—®é¢˜çš„å…³é”®å°±æ˜¯ä¸èƒ½æ•°æ¼ï¼Œä¹Ÿä¸èƒ½æ•°å¤šï¼Œä½ å’‹æ•´ï¼Ÿ

ä¹‹å‰ [æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç¬¬ä¸€æœŸ](https://labuladong.online/algo/data-structure/binary-tree-part1/) è¯´è¿‡ï¼ŒäºŒå‰æ ‘ç®—æ³•çš„å…³é”®å°±åœ¨äºæ˜ç¡®æ ¹èŠ‚ç‚¹éœ€è¦åšä»€ä¹ˆï¼Œå…¶å® BST ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œæ ¸å¿ƒæ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

ğŸŒŸ

* * *

ğŸŒŸ

ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç»™ç®—æ³•è¾“å…¥ `n = 5`ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨ `{1,2,3,4,5}` è¿™äº›æ•°å­—å»æ„é€  BSTã€‚

é¦–å…ˆï¼Œè¿™æ£µ BST çš„æ ¹èŠ‚ç‚¹æ€»å…±æœ‰å‡ ç§æƒ…å†µï¼Ÿ

æ˜¾ç„¶æœ‰ 5 ç§æƒ…å†µå¯¹å§ï¼Œå› ä¸ºæ¯ä¸ªæ•°å­—éƒ½å¯ä»¥ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚

æ¯”å¦‚è¯´æˆ‘ä»¬å›ºå®š `3` ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œè¿™ä¸ªå‰æä¸‹èƒ½æœ‰å‡ ç§ä¸åŒçš„ BST å‘¢ï¼Ÿ

æ ¹æ® BST çš„ç‰¹æ€§ï¼Œæ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å°ï¼Œå³å­æ ‘çš„å€¼éƒ½æ¯”æ ¹èŠ‚ç‚¹çš„å€¼å¤§ã€‚

æ‰€ä»¥å¦‚æœå›ºå®š `3` ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œå·¦å­æ ‘èŠ‚ç‚¹å°±æ˜¯ `{1,2}` çš„ç»„åˆï¼Œå³å­æ ‘å°±æ˜¯ `{4,5}` çš„ç»„åˆã€‚

**å·¦å­æ ‘çš„ç»„åˆæ•°å’Œå³å­æ ‘çš„ç»„åˆæ•°ä¹˜ç§¯**å°±æ˜¯ `3` ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶çš„ BST ä¸ªæ•°ã€‚

![](https://labuladong.online/algo/images/bst-iii/1.jpeg)

æˆ‘ä»¬è¿™æ˜¯è¯´äº† `3` ä¸ºæ ¹èŠ‚ç‚¹è¿™ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå…¶å®å…¶ä»–çš„èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€çœ¼çœ‹å‡º `{1,2}` å’Œ `{4,5}` æœ‰å‡ ç§ç»„åˆï¼Œä½†æ˜¯æ€ä¹ˆè®©ç®—æ³•è¿›è¡Œè®¡ç®—å‘¢ï¼Ÿ

å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦é€’å½’å°±è¡Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥å†™è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š


cpp ğŸ¤–

    // å®šä¹‰ï¼šé—­åŒºé—´ [lo, hi] çš„æ•°å­—èƒ½ç»„æˆ count(lo, hi) ç§ BST
    int count(int lo, int hi);


æ ¹æ®è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ï¼Œç»“åˆåˆšæ‰çš„åˆ†æï¼Œå¯ä»¥å†™å‡ºä»£ç ï¼š


cpp ğŸ¤–

    class Solution {
    public:
        // ä¸»å‡½æ•°
        int numTrees(int n) {
            // è®¡ç®—é—­åŒºé—´ [1, n] ç»„æˆçš„ BST ä¸ªæ•°
            return count(1, n);
        }
    
        // è®¡ç®—é—­åŒºé—´ [lo, hi] ç»„æˆçš„ BST ä¸ªæ•°
        int count(int lo, int hi) {
            // base case
            if (lo > hi) return 1;
    
            int res = 0;
            for (int i = lo; i <= hi; i++) {
                // i çš„å€¼ä½œä¸ºæ ¹èŠ‚ç‚¹ root
                int left = count(lo, i - 1);
                int right = count(i + 1, hi);
                // å·¦å³å­æ ‘çš„ç»„åˆæ•°ä¹˜ç§¯æ˜¯ BST çš„æ€»æ•°
                res += left * right;
            }
            
            return res;
        }
    };


æ³¨æ„ base caseï¼Œæ˜¾ç„¶å½“ `lo > hi` é—­åŒºé—´ `[lo, hi]` è‚¯å®šæ˜¯ä¸ªç©ºåŒºé—´ï¼Œä¹Ÿå°±å¯¹åº”ç€ç©ºèŠ‚ç‚¹ nullï¼Œè™½ç„¶æ˜¯ç©ºèŠ‚ç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥è¦è¿”å› 1 è€Œä¸èƒ½è¿”å› 0ã€‚

è¿™æ ·ï¼Œé¢˜ç›®çš„è¦æ±‚å·²ç»å®ç°äº†ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦éå¸¸é«˜ï¼Œè‚¯å®šå­˜åœ¨é‡å å­é—®é¢˜ã€‚

å‰æ–‡åŠ¨æ€è§„åˆ’ç›¸å…³çš„é—®é¢˜å¤šæ¬¡è®²è¿‡æ¶ˆé™¤é‡å å­é—®é¢˜çš„æ–¹æ³•ï¼Œæ— éå°±æ˜¯åŠ ä¸€ä¸ªå¤‡å¿˜å½•ï¼š


cpp ğŸ¤–

    class Solution {
    public:
        // å¤‡å¿˜å½•
        vector<vector<int>> memo;
    
        int numTrees(int n) {
            // å¤‡å¿˜å½•çš„å€¼åˆå§‹åŒ–ä¸º 0
            memo = vector<vector<int>>(n + 1, vector<int>(n + 1));
            return count(1, n);
        }
    
        // å®šä¹‰ï¼šè®¡ç®—é—­åŒºé—´ [lo, hi] ç»„æˆçš„ BST ä¸ªæ•°
        int count(int lo, int hi) {
            if (lo > hi) return 1;
            // æŸ¥å¤‡å¿˜å½•
            if (memo[lo][hi] != 0) {
                return memo[lo][hi];
            }
            
            int res = 0;
            for (int mid = lo; mid <= hi; mid++) {
                int left = count(lo, mid - 1);
                int right = count(mid + 1, hi);
                res += left * right;
            }
            // å°†ç»“æœå­˜å…¥å¤‡å¿˜å½•
            memo[lo][hi] = res;
            
            return res;
        }
    };


è¿™æ ·ï¼Œè¿™é“é¢˜å°±å®Œå…¨è§£å†³äº†ã€‚

é‚£ä¹ˆï¼Œå¦‚æœç»™ä¸€ä¸ªè¿›é˜¶é¢˜ç›®ï¼Œä¸æ­¢è®©ä½ è®¡ç®—æœ‰å‡ ä¸ªä¸åŒçš„ BSTï¼Œè€Œæ˜¯è¦ä½ æ„å»ºå‡ºæ‰€æœ‰æœ‰æ•ˆçš„ BSTï¼Œå¦‚ä½•å®ç°è¿™ä¸ªç®—æ³•å‘¢ï¼Ÿ

è¿™é“é¢˜å°±æ˜¯åŠ›æ‰£ç¬¬ 95 é¢˜ã€Œ[ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II](https://leetcode.cn/problems/unique-binary-search-trees-ii/)ã€ï¼Œè®©ä½ æ„å»ºæ‰€æœ‰ BSTï¼š

**95\. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II**Â | [åŠ›æ‰£](https://leetcode.cn/problems/unique-binary-search-trees-ii/) | [LeetCode](https://leetcode.com/problems/unique-binary-search-trees-ii/) | Â ğŸŸ 

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¯·ä½ ç”Ÿæˆå¹¶è¿”å›æ‰€æœ‰ç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» `1` åˆ° `n` äº’ä¸ç›¸åŒçš„ä¸åŒ **äºŒå‰æœç´¢æ ‘** ã€‚å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://labuladong.online/algo/images/lc/uploads/2021/01/18/uniquebstn3.jpg)

**è¾“å…¥ï¼š**n = 3
**è¾“å‡ºï¼š**\[\[1,null,2,null,3\],\[1,null,3,2\],\[2,1,3\],\[3,1,null,null,2\],\[3,2,null,1\]\]

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**n = 1
**è¾“å‡ºï¼š**\[\[1\]\]

**æç¤ºï¼š**

*   `1 <= n <= 8`

**é¢˜ç›®æ¥æºï¼š[åŠ›æ‰£ 95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ II](https://leetcode.cn/problems/unique-binary-search-trees-ii/)ã€‚**

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

    List<TreeNode> generateTrees(int n);

**æ˜ç™½äº†ä¸Šé“é¢˜æ„é€ æœ‰æ•ˆ BST çš„æ–¹æ³•ï¼Œè¿™é“é¢˜çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„**ï¼š

1ã€ç©·ä¸¾ `root` èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½ã€‚

2ã€é€’å½’æ„é€ å‡ºå·¦å³å­æ ‘çš„æ‰€æœ‰æœ‰æ•ˆ BSTã€‚

3ã€ç»™ `root` èŠ‚ç‚¹ç©·ä¸¾æ‰€æœ‰å·¦å³å­æ ‘çš„ç»„åˆã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ä»£ç ï¼š


cpp ğŸ¤–

    class Solution {
    public:
        // ä¸»å‡½æ•°
        vector<TreeNode*> generateTrees(int n) {
            if (n == 0) return vector<TreeNode*>{};
            // æ„é€ é—­åŒºé—´ [1, n] ç»„æˆçš„ BST 
            return build(1, n);
        }
    
        // æ„é€ é—­åŒºé—´ [lo, hi] ç»„æˆçš„ BST
        vector<TreeNode*> build(int lo, int hi) {
            vector<TreeNode*> res;
            // base case
            if (lo > hi) {
                // è¿™é‡Œéœ€è¦è£…ä¸€ä¸ª null å…ƒç´ ï¼Œè¿™æ ·æ‰èƒ½è®©ä¸‹é¢çš„ä¸¤ä¸ªå†…å±‚ for å¾ªç¯éƒ½èƒ½è¿›å…¥ï¼Œæ­£ç¡®åœ°åˆ›å»ºå‡ºå¶å­èŠ‚ç‚¹
                // ä¸¾ä¾‹æ¥è¯´å§ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè¿›åˆ°è¿™ä¸ª if è¯­å¥ï¼Ÿå½“ä½ åˆ›å»ºå¶å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯¹å§ã€‚
                // é‚£ä¹ˆå¦‚æœä½ è¿™é‡Œä¸åŠ  nullï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨ï¼Œé‚£ä¹ˆä¸‹é¢çš„å†…å±‚ä¸¤ä¸ª for å¾ªç¯éƒ½æ— æ³•è¿›å…¥
                // ä½ çš„é‚£ä¸ªå¶å­èŠ‚ç‚¹å°±æ²¡æœ‰åˆ›å»ºå‡ºæ¥ï¼Œçœ‹åˆ°äº†å—ï¼Ÿæ‰€ä»¥è¿™é‡Œè¦åŠ ä¸€ä¸ª nullï¼Œç¡®ä¿ä¸‹é¢èƒ½æŠŠå¶å­èŠ‚ç‚¹åšå‡ºæ¥
                res.emplace_back(nullptr);
                return res;
            }
    
            // 1ã€ç©·ä¸¾ root èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½ã€‚
            for (int i = lo; i <= hi; i++) {
                // 2ã€é€’å½’æ„é€ å‡ºå·¦å³å­æ ‘çš„æ‰€æœ‰æœ‰æ•ˆ BSTã€‚
                vector<TreeNode*> leftTree = build(lo, i - 1);
                vector<TreeNode*> rightTree = build(i + 1, hi);
                // 3ã€ç»™ root èŠ‚ç‚¹ç©·ä¸¾æ‰€æœ‰å·¦å³å­æ ‘çš„ç»„åˆã€‚
                for (auto left : leftTree) {
                    for (auto right : rightTree) {
                        // i ä½œä¸ºæ ¹èŠ‚ç‚¹ root çš„å€¼
                        TreeNode* root = new TreeNode(i);
                        root->left = left;
                        root->right = right;
                        res.emplace_back(root);
                    }
                }
            }
            
            return res;
        }
    };


è¿™æ ·ï¼Œä¸¤é“é¢˜éƒ½è§£å†³äº†ã€‚

æœ¬æ–‡å°±åˆ°è¿™é‡Œï¼Œæ›´å¤šç»å…¸çš„äºŒå‰æ ‘ä¹ é¢˜ä»¥åŠé€’å½’æ€ç»´çš„è®­ç»ƒï¼Œè¯·å‚è§äºŒå‰æ ‘ç« èŠ‚ä¸­çš„ [é€’å½’ä¸“é¡¹ç»ƒä¹ ](https://labuladong.online/algo/problem-set/bst1/)

