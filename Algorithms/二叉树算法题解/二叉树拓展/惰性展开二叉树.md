

å‰ç½®çŸ¥è¯†

é˜…è¯»æœ¬æ–‡å‰ï¼Œä½ éœ€è¦å…ˆå­¦ä¹ ï¼š

*   [äºŒå‰æ ‘ç»“æ„åŸºç¡€](https://labuladong.online/algo/data-structure-basic/binary-tree-basic/)
*   [äºŒå‰æ ‘çš„éå†æ¡†æ¶](https://labuladong.online/algo/data-structure-basic/binary-tree-traverse-basic/)
*   [å¤šå‰æ ‘ç»“æ„åŠéå†æ¡†æ¶](https://labuladong.online/algo/data-structure-basic/n-ary-tree-traverse-basic/)

ä»Šå¤©æ¥è®²ä¸€é“éå¸¸æœ‰å¯å‘æ€§çš„è®¾è®¡é¢˜ç›®ï¼Œä¸ºä»€ä¹ˆè¯´å®ƒæœ‰å¯å‘æ€§ï¼Œæˆ‘ä»¬åé¢å†è¯´ã€‚

[ä¸€ã€é¢˜ç›®æè¿°](#)
-----------

è¿™æ˜¯åŠ›æ‰£ç¬¬ 341 é¢˜ã€Œ[æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨](https://leetcode.cn/problems/flatten-nested-list-iterator/)ã€ï¼š

**341\. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨**Â | [åŠ›æ‰£](https://leetcode.cn/problems/flatten-nested-list-iterator/) | [LeetCode](https://leetcode.com/problems/flatten-nested-list-iterator/) | Â ğŸŸ 

ç»™ä½ ä¸€ä¸ªåµŒå¥—çš„æ•´æ•°åˆ—è¡¨ `nestedList` ã€‚æ¯ä¸ªå…ƒç´ è¦ä¹ˆæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼›è¯¥åˆ—è¡¨çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ•´æ•°æˆ–è€…æ˜¯å…¶ä»–åˆ—è¡¨ã€‚è¯·ä½ å®ç°ä¸€ä¸ªè¿­ä»£å™¨å°†å…¶æ‰å¹³åŒ–ï¼Œä½¿ä¹‹èƒ½å¤Ÿéå†è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰æ•´æ•°ã€‚

å®ç°æ‰å¹³è¿­ä»£å™¨ç±» `NestedIterator` ï¼š

*   `NestedIterator(List<NestedInteger> nestedList)` ç”¨åµŒå¥—åˆ—è¡¨ `nestedList` åˆå§‹åŒ–è¿­ä»£å™¨ã€‚
*   `int next()` è¿”å›åµŒå¥—åˆ—è¡¨çš„ä¸‹ä¸€ä¸ªæ•´æ•°ã€‚
*   `boolean hasNext()` å¦‚æœä»ç„¶å­˜åœ¨å¾…è¿­ä»£çš„æ•´æ•°ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

ä½ çš„ä»£ç å°†ä¼šç”¨ä¸‹è¿°ä¼ªä»£ç æ£€æµ‹ï¼š

initialize iterator with nestedList
res = \[\]
while iterator.hasNext()
    append iterator.next() to the end of res
return res

å¦‚æœ `res` ä¸é¢„æœŸçš„æ‰å¹³åŒ–åˆ—è¡¨åŒ¹é…ï¼Œé‚£ä¹ˆä½ çš„ä»£ç å°†ä¼šè¢«åˆ¤ä¸ºæ­£ç¡®ã€‚

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š**nestedList = \[\[1,1\],2,\[1,1\]\]
**è¾“å‡ºï¼š**\[1,1,2,1,1\]
**è§£é‡Šï¼š**é€šè¿‡é‡å¤è°ƒç”¨Â _next_ ç›´åˆ°Â _hasNex_t è¿”å› falseï¼Œ_next_Â è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: `[1,1,2,1,1]`ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**nestedList = \[1,\[4,\[6\]\]\]
**è¾“å‡ºï¼š**\[1,4,6\]
**è§£é‡Šï¼š**é€šè¿‡é‡å¤è°ƒç”¨Â _next_Â ç›´åˆ°Â _hasNex_t è¿”å› falseï¼Œ_next_Â è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: `[1,4,6]`ã€‚

**æç¤ºï¼š**

*   `1 <= nestedList.length <= 500`
*   åµŒå¥—åˆ—è¡¨ä¸­çš„æ•´æ•°å€¼åœ¨èŒƒå›´ `[-106, 106]` å†…

**é¢˜ç›®æ¥æºï¼š[åŠ›æ‰£ 341. æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨](https://leetcode.cn/problems/flatten-nested-list-iterator/)ã€‚**

æˆ‘ä»¬çš„ç®—æ³•ä¼šè¢«è¾“å…¥ä¸€ä¸ª `NestedInteger` åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å†™ä¸€ä¸ªè¿­ä»£å™¨ç±» `NestedIterator`ï¼Œå°†è¿™ä¸ªå¸¦æœ‰åµŒå¥—ç»“æ„ `NestedInteger` çš„åˆ—è¡¨ã€Œæ‹å¹³ã€ï¼š

cpp ğŸ¤–

    class NestedIterator: public Iterator<int> {
    public:
        // æ„é€ å™¨è¾“å…¥ä¸€ä¸ª NestedInteger åˆ—è¡¨
        NestedIterator(vector<NestedInteger> &nestedList) {}
        
        // è¿”å›ä¸‹ä¸€ä¸ªæ•´æ•°
        int next() {}
    
        // æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Ÿ
        bool hasNext() {}
    };


æˆ‘ä»¬å†™çš„è¿™ä¸ª `NestedIterator` ç±»ä¼šè¢«è¿™æ ·è°ƒç”¨ï¼Œ**å…ˆè°ƒç”¨ `hasNext` æ–¹æ³•ï¼Œåè°ƒç”¨ `next` æ–¹æ³•**ï¼š

    NestedIterator i = new NestedIterator(nestedList);
    while (i.hasNext())
        print(i.next());

å­¦è¿‡è®¾è®¡æ¨¡å¼çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œè¿­ä»£å™¨ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œç›®çš„å°±æ˜¯ä¸ºè°ƒç”¨è€…å±è”½åº•å±‚æ•°æ®ç»“æ„çš„ç»†èŠ‚ï¼Œç®€å•åœ°é€šè¿‡ `hasNext` å’Œ `next` æ–¹æ³•æœ‰åºåœ°è¿›è¡Œéå†ã€‚

ä¸ºä»€ä¹ˆè¯´è¿™ä¸ªé¢˜ç›®å¾ˆæœ‰å¯å‘æ€§å‘¢ï¼Ÿå› ä¸ºæˆ‘æœ€è¿‘åœ¨ç”¨ä¸€æ¬¾ç±»ä¼¼å°è±¡ç¬”è®°çš„è½¯ä»¶ï¼Œå«åš Notionï¼ˆæŒºæœ‰åçš„ï¼‰ã€‚è¿™ä¸ªè½¯ä»¶çš„ä¸€ä¸ªäº®ç‚¹å°±æ˜¯ã€Œä¸‡ç‰©çš† blockã€ï¼Œæ¯”å¦‚è¯´æ ‡é¢˜ã€é¡µé¢ã€è¡¨æ ¼éƒ½æ˜¯ blockã€‚æœ‰çš„ block ç”šè‡³å¯ä»¥æ— é™åµŒå¥—ï¼Œè¿™å°±æ‰“ç ´äº†ä¼ ç»Ÿç¬”è®°æœ¬ã€Œæ–‡ä»¶å¤¹ã€->ã€Œç¬”è®°æœ¬ã€->ã€Œç¬”è®°ã€çš„ä¸‰å±‚ç»“æ„ã€‚

å›æƒ³è¿™ä¸ªç®—æ³•é—®é¢˜ï¼Œ`NestedInteger` ç»“æ„å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ç§æ”¯æŒæ— é™åµŒå¥—çš„ç»“æ„ï¼Œè€Œä¸”å¯ä»¥åŒæ—¶è¡¨ç¤ºæ•´æ•°å’Œåˆ—è¡¨ä¸¤ç§ä¸åŒç±»å‹ï¼Œæˆ‘æƒ³ Notion çš„æ ¸å¿ƒæ•°æ®ç»“æ„ block ä¼°è®¡ä¹Ÿæ˜¯è¿™æ ·çš„ä¸€ç§è®¾è®¡æ€è·¯ã€‚

é‚£ä¹ˆè¯è¯´å›æ¥ï¼Œå¯¹äºè¿™ä¸ªç®—æ³•é—®é¢˜ï¼Œæˆ‘ä»¬æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ`NestedInteger` ç»“æ„å¯ä»¥æ— é™åµŒå¥—ï¼Œæ€ä¹ˆæŠŠè¿™ä¸ªç»“æ„ã€Œæ‰“å¹³ã€ï¼Œä¸ºè¿­ä»£å™¨çš„è°ƒç”¨è€…å±è”½åº•å±‚ç»†èŠ‚ï¼Œå¾—åˆ°æ‰å¹³åŒ–çš„è¾“å‡ºå‘¢ï¼Ÿ

[äºŒã€è§£é¢˜æ€è·¯](#)
-----------

ä¸‰ã€è¿›é˜¶æ€è·¯
------

ğŸŒŸ

* * *

ğŸŒŸ

æ˜¾ç„¶ï¼Œ`NestedInteger` è¿™ä¸ªç¥å¥‡çš„æ•°æ®ç»“æ„æ˜¯é—®é¢˜çš„å…³é”®ï¼Œä¸è¿‡é¢˜ç›®ä¸“é—¨æé†’æˆ‘ä»¬ä¸è¦å°è¯•å»å®ç°å®ƒï¼Œä¹Ÿä¸è¦å»çŒœæµ‹å®ƒçš„å®ç°ã€‚

**ä¸ºä»€ä¹ˆï¼Ÿå‡­ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯é¢˜ç›®åœ¨è¯¯å¯¼æˆ‘ï¼Ÿæ˜¯ä¸æ˜¯æˆ‘è¿›è¡Œæ¨æµ‹ä¹‹åï¼Œè¿™é“é¢˜å°±ä¸æ”»è‡ªç ´äº†**ï¼Ÿ

ä½ ä¸è®©æ¨æµ‹ï¼Œæˆ‘å°±ååè¦å»æ¨æµ‹ï¼æˆ‘åæ‰‹å°±æŠŠ `NestedInteger` è¿™ä¸ªç»“æ„ç»™å®ç°å‡ºæ¥ï¼š

cpp ğŸ¤–

    class NestedInteger {
    private:
        int val;
        vector<NestedInteger> list;
    public:
        NestedInteger(int val) {
            this->val = val;
            this->list = vector<NestedInteger>();
        }
        NestedInteger(vector<NestedInteger> list) {
            this->list = list;
            this->val = 0;
        }
    
        // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false
        bool isInteger() {
            return val != 0;
        }
    
        // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¿”å›è¿™ä¸ªæ•´æ•°ï¼Œå¦åˆ™è¿”å› null
        int getInteger() {
            return this->val;
        }
    
        // å¦‚æœå…¶ä¸­å­˜çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ™è¿”å›è¿™ä¸ªåˆ—è¡¨ï¼Œå¦åˆ™è¿”å› null
        vector<NestedInteger> getList() {
            return this->list;
        }
    };


å—¯ï¼Œå…¶å®è¿™ä¸ªå®ç°ä¹Ÿä¸éš¾å˜›ï¼Œå†™å‡ºæ¥ä¹‹åï¼Œæˆ‘ä¸ç¦ç¿»å‡ºå‰æ–‡ [å¤šå‰æ ‘åŸºç¡€åŠéå†](https://labuladong.online/algo/data-structure-basic/n-ary-tree-traverse-basic/)ï¼Œå‘ç°è¿™ç©æ„å„¿ç«Ÿç„¶â€¦â€¦


cpp ğŸ¤–

    class NestedInteger {
    public:
        int val;
        std::vector<NestedInteger> list;
    };
    
    // åŸºæœ¬çš„ N å‰æ ‘èŠ‚ç‚¹
    class TreeNode {
    public:
        int val;
        std::vector<TreeNode*> children;
    };


**è¿™ç©æ„å„¿ä¸å°±æ˜¯æ£µ N å‰æ ‘å—ï¼Ÿå¶å­èŠ‚ç‚¹æ˜¯ `Integer` ç±»å‹ï¼Œå…¶ `val` å­—æ®µéç©ºï¼›å…¶ä»–èŠ‚ç‚¹éƒ½æ˜¯ `List<NestedInteger>` ç±»å‹ï¼Œå…¶ `val` å­—æ®µä¸ºç©ºï¼Œä½†æ˜¯ `list` å­—æ®µéç©ºï¼Œè£…ç€å­©å­èŠ‚ç‚¹**ã€‚

æ¯”å¦‚è¯´è¾“å…¥æ˜¯ `[[1,1],2,[1,1]]`ï¼Œå…¶å®å°±æ˜¯å¦‚ä¸‹æ ‘çŠ¶ç»“æ„ï¼š

![](https://labuladong.online/algo/images/nestedList/1.jpeg)

å¥½çš„ï¼Œåˆšæ‰é¢˜ç›®è¯´ä»€ä¹ˆæ¥ç€ï¼ŸæŠŠä¸€ä¸ª `NestedInteger` æ‰å¹³åŒ–å¯¹å§ï¼Ÿ**è¿™ä¸å°±ç­‰ä»·äºéå†ä¸€æ£µ N å‰æ ‘çš„æ‰€æœ‰ã€Œå¶å­èŠ‚ç‚¹ã€å—**ï¼Ÿæˆ‘æŠŠæ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ‹¿å‡ºæ¥ï¼Œä¸å°±å¯ä»¥ä½œä¸ºè¿­ä»£å™¨è¿›è¡Œéå†äº†å—ï¼Ÿ

N å‰æ ‘çš„éå†æ€ä¹ˆæ•´ï¼Ÿæˆ‘åˆä¸ç¦ç¿»å‡ºå‰æ–‡ [å¤šå‰æ ‘éå†æ¡†æ¶](https://labuladong.online/algo/data-structure-basic/n-ary-tree-traverse-basic/)ï¼š

cpp ğŸ¤–

    void traverse(TreeNode* root) {
        for (TreeNode* child : root->children)
            traverse(child);
    }


è¿™ä¸ªæ¡†æ¶å¯ä»¥éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè€Œæˆ‘ä»¬åªå¯¹æ•´æ•°å‹çš„ `NestedInteger` æ„Ÿå…´è¶£ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªæƒ³è¦ã€Œå¶å­èŠ‚ç‚¹ã€ï¼Œæ‰€ä»¥ `traverse` å‡½æ•°åªè¦åœ¨åˆ°è¾¾å¶å­èŠ‚ç‚¹çš„æ—¶å€™æŠŠ `val` åŠ å…¥ç»“æœåˆ—è¡¨å³å¯ï¼š


cpp ğŸ¤–

    class NestedIterator {
    private:
        vector<int> res;
        vector<int>::iterator it;
    
        // éå†ä»¥ nestedList ä¸ºæ ¹çš„å¤šå‰æ ‘
        void traverse(NestedInteger& root) {
            if (root.isInteger()) {
                // åˆ°è¾¾å¶å­èŠ‚ç‚¹
                res.push_back(root.getInteger());
                return;
            }
            // éå†æ¡†æ¶
            for (auto child : root.getList()) {
                traverse(child);
            }
        }
    
    public:
        NestedIterator(vector<NestedInteger>& nestedList) {
            // å­˜æ”¾å°† nestedList æ‰“å¹³çš„ç»“æœ
            for (auto node : nestedList) {
                // ä»¥æ¯ä¸ªèŠ‚ç‚¹ä¸ºæ ¹éå†
                traverse(node);
            }
            it = res.begin();
        }
    
        int next() {
            return *it++;
        }
    
        bool hasNext() {
            return it != res.end();
        }
    };


è¿™æ ·ï¼Œæˆ‘ä»¬å°±æŠŠåŸé—®é¢˜å·§å¦™è½¬åŒ–æˆäº†ä¸€ä¸ª N å‰æ ‘çš„éå†é—®é¢˜ï¼Œå¹¶ä¸”å¾—åˆ°äº†è§£æ³•ã€‚

[ä¸‰ã€è¿›é˜¶æ€è·¯](#)
-----------

ä»¥ä¸Šè§£æ³•è™½ç„¶å¯ä»¥é€šè¿‡ï¼Œä½†æ˜¯åœ¨é¢è¯•ä¸­ï¼Œä¹Ÿè®¸æ˜¯æœ‰ç‘•ç–µçš„ã€‚

æˆ‘ä»¬çš„è§£æ³•ä¸­ï¼Œä¸€æ¬¡æ€§ç®—å‡ºäº†æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„å€¼ï¼Œå…¨éƒ¨è£…åˆ° `result` åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­ï¼Œ`next` å’Œ `hasNext` æ–¹æ³•åªæ˜¯åœ¨å¯¹ `result` åˆ—è¡¨åšè¿­ä»£ã€‚å¦‚æœè¾“å…¥çš„è§„æ¨¡éå¸¸å¤§ï¼Œæ„é€ å‡½æ•°ä¸­çš„è®¡ç®—å°±ä¼šå¾ˆæ…¢ï¼Œè€Œä¸”å¾ˆå ç”¨å†…å­˜ã€‚

ä¸€èˆ¬çš„è¿­ä»£å™¨æ±‚å€¼åº”è¯¥æ˜¯ã€Œæƒ°æ€§çš„ã€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è¦ä¸€ä¸ªç»“æœï¼Œæˆ‘å°±ç®—ä¸€ä¸ªï¼ˆæˆ–æ˜¯ä¸€å°éƒ¨åˆ†ï¼‰ç»“æœå‡ºæ¥ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æŠŠæ‰€æœ‰ç»“æœéƒ½ç®—å‡ºæ¥ã€‚

å¦‚æœæƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨é€’å½’å‡½æ•°è¿›è¡Œ DFS éå†è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè€Œä¸”æˆ‘ä»¬å…¶å®åªå…³å¿ƒã€Œå¶å­èŠ‚ç‚¹ã€ï¼Œæ‰€ä»¥ä¼ ç»Ÿçš„ BFS ç®—æ³•ä¹Ÿä¸è¡Œã€‚å®é™…çš„æ€è·¯å¾ˆç®€å•ï¼š

**è°ƒç”¨ `hasNext` æ—¶ï¼Œå¦‚æœ `nestedList` çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åˆ—è¡¨ç±»å‹ï¼Œåˆ™ä¸æ–­å±•å¼€è¿™ä¸ªå…ƒç´ ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°ç±»å‹**ã€‚

ä»”ç»†æƒ³ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹åº”è¯¥å°±èƒ½ç†è§£äº†ï¼Œä¸€æ¬¡åªå±•å¼€ä¸€ä¸ªæœ€å†…å±‚çš„ `nestedList`ï¼Œä¸ä¼šä¸€æ¬¡æ€§æŠŠæ‰€æœ‰ `nestedList` å±•å¼€ï¼Œç›¸å½“äºæƒ°æ€§çš„ DFS éå†ã€‚

ç”±äºè°ƒç”¨ `next` æ–¹æ³•ä¹‹å‰ä¸€å®šä¼šè°ƒç”¨ `hasNext` æ–¹æ³•ï¼Œè¿™å°±å¯ä»¥ä¿è¯æ¯æ¬¡è°ƒç”¨ `next` æ–¹æ³•çš„æ—¶å€™ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°å‹ï¼Œç›´æ¥è¿”å›å¹¶åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å³å¯ã€‚

çœ‹ä¸€ä¸‹ä»£ç ï¼š

cpp ğŸ¤–

    class NestedIterator {
    private:
        std::vector<NestedInteger> list;
    
    public:
        NestedIterator(std::vector<NestedInteger> &nestedList) {
            list = nestedList;
        }
    
        int next() {
            // hasNext æ–¹æ³•ä¿è¯äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯æ•´æ•°ç±»å‹
            int res = list[0].getInteger();
            list.erase(list.begin());
            return res;
        }
    
        bool hasNext() {
            // å¾ªç¯æ‹†åˆ†åˆ—è¡¨å…ƒç´ ï¼Œç›´åˆ°åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´æ•°ç±»å‹
            while (!list.empty() && !list[0].isInteger()) {
                // å½“åˆ—è¡¨å¼€å¤´ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åˆ—è¡¨ç±»å‹æ—¶ï¼Œè¿›å…¥å¾ªç¯
                std::vector<NestedInteger> first = list[0].getList();
                list.erase(list.begin());
    
                // å°†ç¬¬ä¸€ä¸ªåˆ—è¡¨æ‰“å¹³å¹¶æŒ‰é¡ºåºæ·»åŠ åˆ°å¼€å¤´
                for (int i = first.size() - 1; i >= 0; i--) {
                    list.insert(list.begin(), first[i]);
                }
            }
            return !list.empty();
        }
    };


ä»¥è¿™ç§æ–¹æ³•ï¼Œç¬¦åˆè¿­ä»£å™¨æƒ°æ€§æ±‚å€¼çš„ç‰¹æ€§ï¼Œæ˜¯æ¯”è¾ƒå¥½çš„è§£æ³•ã€‚

